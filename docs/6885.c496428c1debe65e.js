"use strict";(self.webpackChunkSkeletonJWTAngular=self.webpackChunkSkeletonJWTAngular||[]).push([[6885],{6885:(T,m,o)=>{o.d(m,{w:()=>J});var e=o(8926),l=o(6223),d=o(5219),c=o(3416),g=o(4581),_=o(1831),a=o(540),r=o(6814),h=o(8608),C=o(707),x=o(4480),E=o(1913),b=o(3714),I=o(1312),M=o(4104),D=o(3173);function O(i,p){if(1&i){const n=e.EpF();e.TgZ(0,"p-button",45),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.presentLoginDialog())}),e.qZA()}}function S(i,p){if(1&i){const n=e.EpF();e.TgZ(0,"p-splitButton",46),e.NdJ("onClick",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.toIndividual())}),e.qZA()}if(2&i){const n=e.oxw();e.Q6J("model",n.items)}}function Z(i,p){if(1&i&&e._UZ(0,"i",47),2&i){const n=e.oxw();e.s9C("value",n.itemsInBasket)}}function P(i,p){1&i&&(e.TgZ(0,"div"),e._uU(1,"Enter email address"),e.qZA())}function A(i,p){1&i&&(e.TgZ(0,"div"),e._uU(1,"Enter valid email"),e.qZA())}function w(i,p){if(1&i&&(e.TgZ(0,"div",48),e.YNc(1,P,2,0,"div",49),e.YNc(2,A,2,0,"div",49),e.qZA()),2&i){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.f.email.errors?null:n.f.email.errors.required),e.xp6(1),e.Q6J("ngIf",null==n.f.email.errors?null:n.f.email.errors.email)}}function y(i,p){1&i&&(e.TgZ(0,"div"),e._uU(1,"Enter password"),e.qZA())}function L(i,p){if(1&i&&(e.TgZ(0,"div",48),e.YNc(1,y,2,0,"div",49),e.qZA()),2&i){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.f.password.errors?null:n.f.password.errors.required)}}const v=function(){return["/"]},k=function(){return{width:"430px"}},U=function(){return{"960px":"75vw","640px":"98vw"}},B=function(){return["/forgotpassword"]};let J=(()=>{var i;class p extends c.k{constructor(s,t,u,f,R){super(u),this.router=s,this.fb=t,this.messageService=u,this.httpHelperService=f,this.shoppingCartService=R,this.itemsInBasket=0,this.routeToPath="",this.showLoginDialog=!1,this.loggedIn=!1,this.submitted=!1,this.showRegisterDialog=!1,this.loggedInEvent=new e.vpe,this.onclick=onclick,this.signinForm=this.fb.group({email:["",[l.kI.required,l.kI.email]],password:["",l.kI.required]}),this.items=[{label:"Individual",icon:"pi pi-user",command:()=>{this.router.navigate(["/register-individual"])}},{label:"Supplier",icon:"pi pi-building",command:()=>{this.router.navigate(["/register-supplier"])}}]}get f(){return this.signinForm.controls}indicateThatOnCheckout(){if(localStorage.getItem("shoppingCart")){let s=JSON.parse(localStorage.getItem("shoppingCart"));s.onCheckout=!0,localStorage.setItem("shoppingCart",JSON.stringify(s)),this.router.navigate(["/shopping-cart"])}}presentLoginDialog(){localStorage.getItem("shoppingCart")?this.showLoginDialog=!0:this.router.navigate(["/login"])}loginUser(){this.submitted=!0,!this.signinForm.invalid&&this.login()}login(){this.submitted=!1,this.httpHelperService.postPreAuth("/api/authenticate/login",this.signinForm.value).subscribe({next:s=>{localStorage.setItem("access_token",s.accessToken),this.httpHelperService.getWithParm("/api/public/find",s.id).subscribe({next:t=>{localStorage.setItem("user_info",JSON.stringify(t)),localStorage.getItem("shoppingCart")?setTimeout(()=>this.shoppingCartService.storeShoppingbasket(t.guid),50):setTimeout(()=>this.shoppingCartService.fetchShoppingCart(t.guid),50),this.loggedIn=this.httpHelperService.isLoggedIn,this.loggedInEvent.emit(this.loggedIn),this.routeToPath&&this.routeToPath.length>0&&this.router.navigate([this.routeToPath])},error:t=>{console.log(t)},complete:()=>{console.log("complete"),this.showLoginDialog=!1}})},error:s=>{super.processError(s)},complete:()=>{console.log("complete")}})}ngOnInit(){this.loggedIn=this.httpHelperService.isLoggedIn,this.loggedInEvent.emit(this.loggedIn),this.showRegisterDialog=!1,this.showLoginDialog=!1}logout(){this.httpHelperService.doLogout(),this.loggedIn=!1,this.loggedInEvent.emit(!1)}register(){this.showRegisterDialog=!0}toIndividual(){this.router.navigate(["/register-individual"])}fetchShoppingCart(s){this.httpHelperService.getWithParm("/api/shoppingcart/shoppingcartbyuser",s).subscribe({next:t=>{localStorage.setItem("shoppingCart",JSON.stringify(t)),this.fetchShoppingCart(t.guid)},error:t=>{console.log(t)},complete:()=>{console.log("complete")}})}}return(i=p).\u0275fac=function(s){return new(s||i)(e.Y36(g.F0),e.Y36(l.qu),e.Y36(d.ez),e.Y36(_.x),e.Y36(a.F))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ecom-top-menu"]],inputs:{itemsInBasket:"itemsInBasket",routeToPath:"routeToPath",showLoginDialog:"showLoginDialog"},outputs:{loggedInEvent:"loggedInEvent"},features:[e._Bn([d.ez]),e.qOj],decls:66,vars:23,consts:[[1,"flex","align-items-center","justify-content-between","relative","lg:static","py-6","mx-0","px-4","lg:py-6"],[1,"mb-0",3,"routerLink"],["enable-background","new 0 0 100 27.1","height","50","viewBox","0 0 100 27.1","width","300","xmlns","http://www.w3.org/2000/svg"],["clip-rule","evenodd","cx","9.4","cy","2.5","fill","#00733b","fill-rule","evenodd","rx","2.6","ry","2.5"],["clip-rule","evenodd","cx","17.5","cy","2.5","fill","#00733b","fill-rule","evenodd","rx","2.6","ry","2.5"],["clip-rule","evenodd","d","m6 18.7 3.3 8.4 3.4-8.4-3.4-6.5z","fill","#00733b","fill-rule","evenodd"],["clip-rule","evenodd","d","m17.5 12.2-3.4 6.5 3.4 8.4 3.4-8.4z","fill","#00733b","fill-rule","evenodd"],["clip-rule","evenodd","d","m0 17.7 5.9-12h6.7l.8 1.2.7-1.2h6.8l5.9 12h-5.3l-4.1-8-4 8-4.1-8-4 8z","fill","#f48120","fill-rule","evenodd"],["fill","#00733b"],["d","m33.8 9.9h3.4l2.7 6.8c.1.3.3.6.6.9h-3.9c.1-.2.2-.3.2-.5s-.1-.5-.2-.8l-.4-.8h-3.2l-.5 1.1c-.1.2-.1.4-.1.5s0 .3.1.5h-2.2c.3-.4.6-.9.9-1.5l2.7-5.8c.2-.1.1-.2-.1-.4zm2 4.4-1-2.4-1.1 2.4z"],["d","m45.8 11.9v1.1h-1.9v2.1 1.8c0 .3.1.5.2.7h-3.3c.1-.2.2-.3.2-.5s0-.5 0-.9v-3.2h-.8v-1.1h.8v-.4c0-1.1.7-1.6 2.1-1.6h3.1l.2 1.3c-.2-.1-.3-.2-.4-.2s-.2 0-.5 0h-1.2c-.2 0-.4 0-.4.1-.1.1-.1.2-.1.4v.4z"],["d","m49.1 11.9.1.9c.1-.2.1-.4.2-.5s.2-.2.3-.3c.2-.1.5-.2.9-.2h1.4v1.9c-.1-.1-.3-.2-.4-.3-.2 0-.4-.1-.7-.1h-.6c-.3 0-.5.1-.7.2s-.2.4-.2.6v1.9.9c0 .2.1.3.2.5h-3.3c.1-.2.2-.4.2-.5 0-.2 0-.5 0-.9v-2.8c0-.4 0-.7 0-.9s-.1-.3-.2-.5h2.8z"],["d","m55.4 11.9v4.3.9c0 .2.1.3.2.5h-3.3c.1-.2.2-.4.2-.5 0-.2 0-.5 0-.9v-2.8c0-.4 0-.7 0-.9s-.1-.3-.2-.5h3.1zm0-2v1.4h-2.8v-1.4z"],["d","m59.7 11.2v1.9h2.6c.3 0 .7-.1 1-.2v1.7c-.2-.1-.4-.2-.5-.2-.2 0-.4 0-.7 0h-2.3v2.2c0 .5.1.9.3 1.1h-3.6c.2-.3.3-.6.3-1.1v-5.4c0-.5-.1-.9-.3-1.1h6.7l.2 1.5c-.2-.1-.4-.1-.5-.2s-.5 0-1.1 0h-2.1z"],["d","m65.9 11.9h3.7c.5 0 .8 0 1 .1s.4.2.6.3c.2.2.3.3.4.6.1.2.1.5.1.8v2.3c0 1.1-.6 1.7-1.9 1.6h-3.6c-.5 0-.9 0-1.1-.1-.2 0-.4-.2-.6-.3-.3-.3-.5-.7-.5-1.3v-2.4c0-.6.2-1 .7-1.3.2-.1.3-.2.5-.2 0 0 .3-.1.7-.1zm.8 1.8v2.2c0 .3 0 .4.1.5s.3.1.5.1h.8c.2 0 .4-.1.5-.2s.1-.3.1-.6v-2.1c0-.3-.1-.5-.2-.6s-.3-.2-.6-.2h-.7c-.3.2-.5.4-.5.9z"],["d","m75.2 11.9.1.9c.1-.2.1-.4.2-.5s.2-.2.3-.3c.2-.1.5-.2.9-.2h1.4v1.9c-.1-.1-.3-.2-.4-.3-.2 0-.4-.1-.7-.1h-.6c-.3 0-.5.1-.7.2s-.2.4-.2.6v1.9.9c0 .2.1.3.2.5h-3.3c.1-.2.2-.4.2-.5 0-.2 0-.5 0-.9v-2.8c0-.4 0-.7 0-.9s-.1-.3-.2-.5h2.8z"],["d","m86.3 11.9v4.3.9c0 .2.1.3.2.5h-2.6l-.1-.5c-.1.2-.2.4-.3.4s-.4.1-.7.1h-2.2c-.4 0-.7 0-.9-.1s-.4-.2-.5-.3c-.2-.2-.3-.3-.3-.5s-.1-.5-.1-1v-2.3c0-.4 0-.7 0-.9s-.1-.3-.2-.5h3v3.9c0 .5.2.8.6.8h.7c.3 0 .5 0 .6-.1s.1-.3.1-.6v-2.5c0-.4 0-.7 0-.9s-.1-.3-.2-.5h2.9z"],["d","m90.2 11.9.1.6c.1-.2.1-.4.2-.4.1-.1.3-.1.5-.1h2.9c.4 0 .6 0 .8.1.1.1.2.2.3.5.1-.2.1-.4.2-.4.1-.1.3-.1.5-.1h2.3c.4 0 .7 0 .8.1.2.1.4.2.5.4.2.2.3.4.3.6.1.2.1.6.1 1v2.2 1s.1.2.2.4h-3.2c.1-.2.2-.4.2-.5 0-.2 0-.5 0-.9v-2.5c0-.3 0-.5-.1-.6s-.2-.1-.5-.1h-.7c-.3 0-.4 0-.5.1s-.1.3-.1.5v2.5.9c0 .2.1.3.2.5h-3.3c.1-.2.2-.4.2-.5 0-.2 0-.5 0-.9v-2.5c0-.3 0-.5-.1-.6.1-.1 0-.2-.2-.2h-.9c-.2 0-.4 0-.4.1-.1.1-.1.3-.1.5v2.5.9c0 .2.1.3.2.5h-3.3c.1-.2.2-.4.2-.5 0-.2 0-.5 0-.9v-2.8c0-.4 0-.7 0-.9s-.1-.3-.2-.5z"],["pRipple","","pStyleClass","@next","enterClass","ng-hidden","enterActiveClass","px-fadein","leaveToClass","ng-hidden","leaveActiveClass","px-fadeout",1,"cursor-pointer","block","md:hidden","text-700","text-primary",3,"hideOnOutsideClick"],[1,"pi","pi-bars","text-4xl"],[1,"list-none","flex-grow-1","justify-content-end","ng-hidden","md:flex","absolute","md:relative","h-screen","md:h-auto","surface-card","md:surface-ground","m-0","z-5","w-full","sm:w-6","md:w-full","py-6","md:py-0",2,"top","0px","right","0%"],["menu",""],["pRipple","","pStyleClass","@parent","enterClass","ng-hidden","enterActiveClass","px-scalein","leaveToClass","ng-hidden","leaveActiveClass","px-fadeout",1,"cursor-pointer","block","md:hidden","text-700","text-primary","absolute",2,"top","3rem","right","2rem"],[1,"pi","pi-times","text-4xl"],["label","Home","styleClass","p-button-text",3,"routerLink"],["label","Login","styleClass","p-button-text",3,"click",4,"ngIf"],["label","Register","styleClass","p-button-text mr-2 mb-2",3,"model","onClick",4,"ngIf"],["pRipple","","pStyleClass","@grandparent","enterClass","ng-hidden","enterActiveClass","px-fadein","leaveToClass","ng-hidden",1,"flex","m-0","md:ml-5","md:px-0","px-3","py-3","text-900","font-medium","line-height-3","hover:text-primary","cursor-pointer",3,"click"],["class","pi pi-shopping-cart mr-4 p-text-secondary","pBadge","","style","font-size: 2rem",3,"value",4,"ngIf"],["header","Login","position","top",1,"p-fluid",3,"visible","modal","draggable","breakpoints","visibleChange"],[3,"formGroup","ngSubmit"],[1,"flex","align-items-center","justify-content-center"],[1,"mb-6",3,"routerLink"],["enable-background","new 0 0 100 27.1","height","60","viewBox","0 0 100 27.1","width","300","xmlns","http://www.w3.org/2000/svg"],[1,"flex","flex-column"],[1,"w-full","mb-4","pt-1"],[1,"p-input-icon-left"],[1,"pi","pi-envelope"],["id","email","formControlName","email","type","text","pInputText","","placeholder","Email","required","","autofocus","",1,"w-full","text-color-secondary","surface-50","border-200"],["class","invalid-feedback hserror",4,"ngIf"],[1,"w-full","mb-4"],[1,"pi","pi-lock"],["id","password","formControlName","password","type","password","pInputText","","placeholder","Password",1,"w-full","text-color-secondary","surface-50","border-200"],["type","submit","pButton","","pRipple","","label","Sign in",1,"w-full","mb-4"],["href","#",1,"font-medium","text-sm","text-400",3,"routerLink"],["label","Login","styleClass","p-button-text",3,"click"],["label","Register","styleClass","p-button-text mr-2 mb-2",3,"model","onClick"],["pBadge","",1,"pi","pi-shopping-cart","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],[1,"invalid-feedback","hserror"],[4,"ngIf"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"a",1),e.O4$(),e.TgZ(2,"svg",2),e._UZ(3,"ellipse",3)(4,"ellipse",4)(5,"path",5)(6,"path",6)(7,"path",7),e.TgZ(8,"g",8),e._UZ(9,"path",9)(10,"path",10)(11,"path",11)(12,"path",12)(13,"path",13)(14,"path",14)(15,"path",15)(16,"path",16)(17,"path",17),e.qZA()()(),e.kcU(),e.TgZ(18,"a",18),e._UZ(19,"i",19),e.qZA(),e.TgZ(20,"ul",20,21)(22,"a",22),e._UZ(23,"i",23),e.qZA(),e._UZ(24,"p-button",24),e.YNc(25,O,1,0,"p-button",25),e.YNc(26,S,1,1,"p-splitButton",26),e.TgZ(27,"a",27),e.NdJ("click",function(){return t.indicateThatOnCheckout()}),e.TgZ(28,"span"),e.YNc(29,Z,1,1,"i",28),e.qZA()()()(),e.TgZ(30,"p-dialog",29),e.NdJ("visibleChange",function(f){return t.showLoginDialog=f}),e.TgZ(31,"form",30),e.NdJ("ngSubmit",function(){return t.loginUser()}),e._UZ(32,"p-toast"),e.TgZ(33,"div",31)(34,"a",32),e.O4$(),e.TgZ(35,"svg",33),e._UZ(36,"ellipse",3)(37,"ellipse",4)(38,"path",5)(39,"path",6)(40,"path",7),e.TgZ(41,"g",8),e._UZ(42,"path",9)(43,"path",10)(44,"path",11)(45,"path",12)(46,"path",13)(47,"path",14)(48,"path",15)(49,"path",16)(50,"path",17),e.qZA()()()(),e.kcU(),e.TgZ(51,"div",34)(52,"span",35)(53,"span",36),e._UZ(54,"i",37)(55,"input",38),e.qZA(),e.YNc(56,w,3,2,"div",39),e.qZA(),e.TgZ(57,"span",40)(58,"span",36),e._UZ(59,"i",41)(60,"input",42),e.qZA(),e.YNc(61,L,2,1,"div",39),e.qZA(),e._UZ(62,"button",43),e.qZA(),e.TgZ(63,"div",31)(64,"a",44),e._uU(65,"forget password?"),e.qZA()()()()),2&s&&(e.xp6(1),e.Q6J("routerLink",e.DdM(17,v)),e.xp6(17),e.Q6J("hideOnOutsideClick",!0),e.xp6(6),e.Q6J("routerLink",e.DdM(18,v)),e.xp6(1),e.Q6J("ngIf",!t.loggedIn),e.xp6(1),e.Q6J("ngIf",!t.loggedIn),e.xp6(3),e.Q6J("ngIf",t.itemsInBasket>0),e.xp6(1),e.Akn(e.DdM(19,k)),e.Q6J("visible",t.showLoginDialog)("modal",!0)("draggable",!1)("breakpoints",e.DdM(20,U)),e.xp6(1),e.Q6J("formGroup",t.signinForm),e.xp6(3),e.Q6J("routerLink",e.DdM(21,v)),e.xp6(22),e.Q6J("ngIf",t.submitted&&t.f.email.errors),e.xp6(5),e.Q6J("ngIf",t.submitted&&t.f.password.errors),e.xp6(3),e.Q6J("routerLink",e.DdM(22,B)))},dependencies:[r.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,h.lM,C.Hq,C.zx,x.H,E.h,b.o,I.V,g.rH,M.FN,l.sg,l.u,D.a]}),p})()},540:(T,m,o)=>{o.d(m,{F:()=>d});var e=o(8926),l=o(1831);let d=(()=>{var c;class g{constructor(a){this.httpHelperService=a}storeShoppingbasket(a){let r=JSON.parse(localStorage.getItem("shoppingCart"));r&&(r.userGuid=a,this.httpHelperService.postPreAuth("/api/public/shoppingcart",JSON.stringify(r)).subscribe({next:h=>{localStorage.setItem("shoppingCart",JSON.stringify(h))},error:h=>{console.log(h)},complete:()=>{console.log("complete")}}))}fetchShoppingCart(a){this.httpHelperService.getWithParm("/api/shoppingcart/shoppingcartbyuser",a).subscribe({next:r=>{localStorage.setItem("shoppingCart",JSON.stringify(r)),this.fetchShoppingCart(r.guid)},error:r=>{console.log(r)},complete:()=>{console.log("complete")}})}}return(c=g).\u0275fac=function(a){return new(a||c)(e.LFG(l.x))},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),g})()}}]);